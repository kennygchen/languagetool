


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > French</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.languagetool.language</a>
</div>

<h1>Coverage Summary for Class: French (org.languagetool.language)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">French</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    9.1%
  </span>
  <span class="absValue">
    (3/33)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0.8%
  </span>
  <span class="absValue">
    (1/128)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    41.8%
  </span>
  <span class="absValue">
    (125/299)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/* LanguageTool, a natural language style checker
&nbsp; * Copyright (C) 2007 Daniel Naber (http://www.danielnaber.de)
&nbsp; *
&nbsp; * This library is free software; you can redistribute it and/or
&nbsp; * modify it under the terms of the GNU Lesser General Public
&nbsp; * License as published by the Free Software Foundation; either
&nbsp; * version 2.1 of the License, or (at your option) any later version.
&nbsp; *
&nbsp; * This library is distributed in the hope that it will be useful,
&nbsp; * but WITHOUT ANY WARRANTY; without even the implied warranty of
&nbsp; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
&nbsp; * Lesser General Public License for more details.
&nbsp; *
&nbsp; * You should have received a copy of the GNU Lesser General Public
&nbsp; * License along with this library; if not, write to the Free Software
&nbsp; * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301
&nbsp; * USA
&nbsp; */
&nbsp;package org.languagetool.language;
&nbsp;
&nbsp;import org.jetbrains.annotations.NotNull;
&nbsp;import org.jetbrains.annotations.Nullable;
&nbsp;import org.languagetool.*;
&nbsp;import org.languagetool.languagemodel.LanguageModel;
&nbsp;import org.languagetool.markup.AnnotatedText;
&nbsp;import org.languagetool.rules.*;
&nbsp;import org.languagetool.rules.fr.*;
&nbsp;import org.languagetool.rules.spelling.SpellingCheckRule;
&nbsp;import org.languagetool.rules.spelling.multitoken.MultitokenSpeller;
&nbsp;import org.languagetool.synthesis.FrenchSynthesizer;
&nbsp;import org.languagetool.synthesis.Synthesizer;
&nbsp;import org.languagetool.tagging.Tagger;
&nbsp;import org.languagetool.tagging.disambiguation.Disambiguator;
&nbsp;import org.languagetool.tagging.disambiguation.fr.FrenchHybridDisambiguator;
&nbsp;import org.languagetool.tagging.fr.FrenchTagger;
&nbsp;import org.languagetool.tokenizers.SRXSentenceTokenizer;
&nbsp;import org.languagetool.tokenizers.SentenceTokenizer;
&nbsp;import org.languagetool.tokenizers.Tokenizer;
&nbsp;import org.languagetool.tokenizers.fr.FrenchWordTokenizer;
&nbsp;
&nbsp;import java.io.IOException;
&nbsp;import java.util.*;
&nbsp;import java.util.regex.Pattern;
&nbsp;
&nbsp;import static java.util.regex.Pattern.compile;
&nbsp;
&nbsp;
&nbsp;public class French extends LanguageWithModel {
&nbsp;  private static final String BEFORE_APOS = &quot;([cjnmtsldCJNMTSLD]|qu|jusqu|lorsqu|puisqu|quoiqu|Qu|Jusqu|Lorsqu|Puisqu|Quoiqu|QU|JUSQU|LORSQU|PUISQU|QUOIQU)&quot;;
<b class="fc">&nbsp;  private static final Pattern BEFORE_APOS_PATTERN_1 = compile(&quot;(\\b&quot; + BEFORE_APOS + &quot;)&#39;&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern BEFORE_APOS_PATTERN_2 = compile(&quot;(\\b&quot; + BEFORE_APOS + &quot;)’\&quot;&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern BEFORE_APOS_PATTERN_3 = compile(&quot;(\\b&quot; + BEFORE_APOS + &quot;)’&#39;&quot;);</b>
&nbsp;
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_1 = compile(&quot;\u00a0;&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_2 = compile(&quot;\u00a0!&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_3 = compile(&quot;\u00a0\\?&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_4 = compile(&quot;;&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_5 = compile(&quot;!&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_6 = compile(&quot;\\?&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_7 = compile(&quot;:&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_8 = compile(&quot;»&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_9 = compile(&quot;«&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_10 = compile(&quot;\u00a0\u00a0&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_11 = compile(&quot;\u202f\u202f&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_12 = compile(&quot;  &quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_13 = compile(&quot;\u00a0 &quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_14 = compile(&quot; \u00a0&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_15 = compile(&quot; \u202f&quot;);</b>
<b class="fc">&nbsp;  private static final Pattern TYPOGRAPHY_PATTERN_16 = compile(&quot;\u202f &quot;);</b>
&nbsp;
&nbsp;  private static final String FRENCH_SHORT_CODE = &quot;fr&quot;;
&nbsp;
&nbsp;  private static volatile Throwable instantiationTrace;
&nbsp;
&nbsp;  /**
&nbsp;   * @deprecated don&#39;t use this method besides the inheritance or core code. Languages are not supposed to be
&nbsp;   * instantiated multiple times. They may contain heavy data which may waste the memory.
&nbsp;   * Use {@link #getInstance()} instead.
&nbsp;   */
&nbsp;  @Deprecated
<b class="fc">&nbsp;  public French() {</b>
<b class="fc">&nbsp;    Throwable trace = instantiationTrace;</b>
<b class="pc">&nbsp;    if (trace != null) {</b>
<b class="nc">&nbsp;      throw new RuntimeException(&quot;Language was already instantiated, see the cause stacktrace below.&quot;, trace);</b>
&nbsp;    }
<b class="fc">&nbsp;    instantiationTrace = new Throwable();</b>
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * This is a fake constructor overload for the subclasses. Public constructors can only be used by the LT itself.
&nbsp;   */
<b class="fc">&nbsp;  protected French(boolean fakeValue) {</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public SentenceTokenizer createDefaultSentenceTokenizer() {
<b class="nc">&nbsp;    return new SRXSentenceTokenizer(this);</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public String getName() {
<b class="nc">&nbsp;    return &quot;French&quot;;</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public String getShortCode() {
<b class="nc">&nbsp;    return FRENCH_SHORT_CODE;</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public String[] getCountries() {
<b class="nc">&nbsp;    return new String[]{&quot;FR&quot;, &quot;&quot;, &quot;LU&quot;, &quot;MC&quot;, &quot;CM&quot;,  &quot;CI&quot;, &quot;HT&quot;, &quot;ML&quot;, &quot;SN&quot;, &quot;CD&quot;, &quot;MA&quot;, &quot;RE&quot;};</b>
&nbsp;    //  &quot;BE&quot;, &quot;CH&quot;, &quot;CA&quot;,
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public Language getDefaultLanguageVariant() {
<b class="nc">&nbsp;    return Languages.getLanguageForShortCode(FRENCH_SHORT_CODE);</b>
&nbsp;  }
&nbsp;  @NotNull
&nbsp;  @Override
&nbsp;  public Tagger createDefaultTagger() {
<b class="nc">&nbsp;    return FrenchTagger.INSTANCE;</b>
&nbsp;  }
&nbsp;
&nbsp;  @Nullable
&nbsp;  @Override
&nbsp;  public Synthesizer createDefaultSynthesizer() {
<b class="nc">&nbsp;    return FrenchSynthesizer.INSTANCE;</b>
&nbsp;  }
&nbsp;  
&nbsp;  @Override
&nbsp;  public Tokenizer createDefaultWordTokenizer() {
<b class="nc">&nbsp;    return new FrenchWordTokenizer();</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public Disambiguator createDefaultDisambiguator() {
<b class="nc">&nbsp;    return new FrenchHybridDisambiguator();</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public Contributor[] getMaintainers() {
<b class="nc">&nbsp;    return new Contributor[] {</b>
&nbsp;        Contributors.DOMINIQUE_PELLE
&nbsp;    };
&nbsp;  }
&nbsp;
&nbsp;
&nbsp;  @Override
&nbsp;  public SpellingCheckRule createDefaultSpellingRule(ResourceBundle messages) throws IOException {
<b class="nc">&nbsp;    return MorfologikFrenchSpellerRule.getRule(messages, this);</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public List&lt;Rule&gt; getRelevantRules(ResourceBundle messages, UserConfig userConfig, Language motherTongue, List&lt;Language&gt; altLanguages) throws IOException {
<b class="nc">&nbsp;    return Arrays.asList(</b>
&nbsp;            new CommaWhitespaceRule(messages, false),
&nbsp;            new DoublePunctuationRule(messages),
&nbsp;            new GenericUnpairedBracketsRule(messages,
<b class="nc">&nbsp;                    Arrays.asList(&quot;[&quot;, &quot;(&quot;, &quot;{&quot; /*&quot;«&quot;, &quot;‘&quot;*/),</b>
<b class="nc">&nbsp;                    Arrays.asList(&quot;]&quot;, &quot;)&quot;, &quot;}&quot;</b>
&nbsp;                         /*&quot;»&quot;, French dialog can contain multiple sentences. */
&nbsp;                         /*&quot;’&quot; used in &quot;d’arm&quot; and many other words */)),
<b class="nc">&nbsp;      MorfologikFrenchSpellerRule.getRule(messages, this, userConfig, altLanguages),</b>
&nbsp;            new UppercaseSentenceStartRule(messages, this),
&nbsp;            new MultipleWhitespaceRule(messages, this),
&nbsp;            new SentenceWhitespaceRule(messages),
&nbsp;            new LongSentenceRule(messages, userConfig, 40),
&nbsp;            new LongParagraphRule(messages, this, userConfig),
&nbsp;            // specific to French:
&nbsp;            new CompoundRule(messages, this, userConfig),
&nbsp;            new QuestionWhitespaceStrictRule(messages, this),
&nbsp;            new QuestionWhitespaceRule(messages, this),
&nbsp;            new SimpleReplaceRule(messages, this),
&nbsp;            new FrenchRepeatedWordsRule(messages)
&nbsp;    );
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public List&lt;Rule&gt; getRelevantRulesGlobalConfig(ResourceBundle messages, GlobalConfig globalConfig, UserConfig userConfig, Language motherTongue, List&lt;Language&gt; altLanguages) throws IOException {
<b class="nc">&nbsp;    List&lt;Rule&gt; rules = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;    if (globalConfig != null &amp;&amp; globalConfig.getGrammalecteServer() != null) {</b>
<b class="nc">&nbsp;      rules.add(new GrammalecteRule(messages, globalConfig));</b>
&nbsp;    }
<b class="nc">&nbsp;    return rules;</b>
&nbsp;  }
&nbsp;
&nbsp;  /** @since 3.1 */
&nbsp;  @Override
&nbsp;  public List&lt;Rule&gt; getRelevantLanguageModelRules(ResourceBundle messages, LanguageModel languageModel, UserConfig userConfig) throws IOException {
<b class="nc">&nbsp;    return Collections.singletonList(</b>
&nbsp;      new FrenchConfusionProbabilityRule(messages, languageModel, this)
&nbsp;    );
&nbsp;  }
&nbsp;
&nbsp;  /** @since 5.1 */
&nbsp;  @Override
&nbsp;  public String getOpeningDoubleQuote() {
<b class="nc">&nbsp;    return &quot;«&quot;;</b>
&nbsp;  }
&nbsp;
&nbsp;  /** @since 5.1 */
&nbsp;  @Override
&nbsp;  public String getClosingDoubleQuote() {
<b class="nc">&nbsp;    return &quot;»&quot;;</b>
&nbsp;  }
&nbsp;  
&nbsp;  /** @since 5.1 */
&nbsp;  @Override
&nbsp;  public String getOpeningSingleQuote() {
<b class="nc">&nbsp;    return &quot;‘&quot;;</b>
&nbsp;  }
&nbsp;
&nbsp;  /** @since 5.1 */
&nbsp;  @Override
&nbsp;  public String getClosingSingleQuote() {
<b class="nc">&nbsp;    return &quot;’&quot;;</b>
&nbsp;  }
&nbsp;  
&nbsp;  /** @since 5.1 */
&nbsp;  @Override
&nbsp;  public boolean isAdvancedTypographyEnabled() {
<b class="nc">&nbsp;    return true;</b>
&nbsp;  }
&nbsp;  
&nbsp;  @Override
&nbsp;  public String toAdvancedTypography (String input) {
<b class="nc">&nbsp;    String output = super.toAdvancedTypography(input);</b>
&nbsp;  
&nbsp;    // special cases: apostrophe + quotation marks
<b class="nc">&nbsp;    output = BEFORE_APOS_PATTERN_1.matcher(output).replaceAll(&quot;$1’&quot;);</b>
<b class="nc">&nbsp;    output = BEFORE_APOS_PATTERN_2.matcher(output).replaceAll(&quot;$1’&quot; + getOpeningDoubleQuote());</b>
<b class="nc">&nbsp;    output = BEFORE_APOS_PATTERN_3.matcher(output).replaceAll(&quot;$1’&quot; + getOpeningSingleQuote());</b>
&nbsp;
&nbsp;    // non-breaking (thin) space 
&nbsp;    // according to https://fr.wikipedia.org/wiki/Espace_ins%C3%A9cable#En_France
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_1.matcher(output).replaceAll(&quot;\u202f;&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_2.matcher(output).replaceAll(&quot;\u202f!&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_3.matcher(output).replaceAll(&quot;\u202f?&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_4.matcher(output).replaceAll(&quot;\u202f;&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_5.matcher(output).replaceAll(&quot;\u202f!&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_6.matcher(output).replaceAll(&quot;\u202f?&quot;);</b>
&nbsp;
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_7.matcher(output).replaceAll(&quot;\u00a0:&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_8.matcher(output).replaceAll(&quot;\u00a0»&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_9.matcher(output).replaceAll(&quot;«\u00a0&quot;);</b>
&nbsp;    
&nbsp;    //remove duplicate spaces
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_10.matcher(output).replaceAll(&quot;\u00a0&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_11.matcher(output).replaceAll(&quot;\u202f&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_12.matcher(output).replaceAll(&quot; &quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_13.matcher(output).replaceAll(&quot;\u00a0&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_14.matcher(output).replaceAll(&quot;\u00a0&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_15.matcher(output).replaceAll(&quot;\u202f&quot;);</b>
<b class="nc">&nbsp;    output = TYPOGRAPHY_PATTERN_16.matcher(output).replaceAll(&quot;\u202f&quot;);</b>
&nbsp;
<b class="nc">&nbsp;    return output;</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public LanguageMaintainedState getMaintainedState() {
<b class="nc">&nbsp;    return LanguageMaintainedState.ActivelyMaintained;</b>
&nbsp;  }
&nbsp;
<b class="fc">&nbsp;  private final static Map&lt;String, Integer&gt; id2prio = new HashMap&lt;&gt;();</b>
&nbsp;  static {
<b class="fc">&nbsp;    id2prio.put(&quot;AGREEMENT_EXCEPTIONS&quot;, 100); // greater than D_N</b>
<b class="fc">&nbsp;    id2prio.put(&quot;EXPRESSIONS_VU&quot;, 100); // greater than A_ACCENT_A</b>
<b class="fc">&nbsp;    id2prio.put(&quot;SA_CA_SE&quot;, 100); // greater than D_N</b>
<b class="fc">&nbsp;    id2prio.put(&quot;SIL_VOUS_PLAIT&quot;, 100); // greater than ACCORD_R_PERS_VERBE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;QUASI_NOM&quot;, 100); // greater than D_N</b>
<b class="fc">&nbsp;    id2prio.put(&quot;MA&quot;, 100); // greater than D_J</b>
<b class="fc">&nbsp;    id2prio.put(&quot;SON_SONT&quot;, 100); // greater than D_J</b>
<b class="fc">&nbsp;    id2prio.put(&quot;JE_TES&quot;, 100); // greater than D_J</b>
<b class="fc">&nbsp;    id2prio.put(&quot;A_INFINITIF&quot;, 100);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ON_ONT&quot;, 100); // greater than PRONSUJ_NONVERBE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;LEURS_LEUR&quot;, 100); // greater than N_V</b>
<b class="fc">&nbsp;    id2prio.put(&quot;DU_DU&quot;, 100); // greater than DU_LE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ACCORD_CHAQUE&quot;, 100); // greater than ACCORD_NOMBRE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;J_N2&quot;, 100); // greater than J_N</b>
<b class="fc">&nbsp;    id2prio.put(&quot;CEST_A_DIRE&quot;, 100); // greater than A_A_ACCENT</b>
<b class="fc">&nbsp;    id2prio.put(&quot;FAIRE_VPPA&quot;, 100); // greater than A_ACCENT_A</b>
<b class="fc">&nbsp;    id2prio.put(&quot;D_N_E_OU_E&quot;, 100); // greater than D_N</b>
<b class="fc">&nbsp;    id2prio.put(&quot;GENS_ACCORD&quot;, 100); // greater than AGREEMENT_POSTPONED_ADJ</b>
<b class="fc">&nbsp;    id2prio.put(&quot;VIRGULE_EXPRESSIONS_FIGEES&quot;, 100); // greater than agreement rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;TRAIT_UNION&quot;, 100); // greater than other rules for trait d&#39;union</b>
<b class="fc">&nbsp;    id2prio.put(&quot;PLURIEL_AL2&quot;, 100); // greater than other rules for pluriel al</b>
<b class="fc">&nbsp;    id2prio.put(&quot;FR_SPLIT_WORDS_HYPHEN&quot;, 100); // greater than MOTS_INCOMP</b>
<b class="fc">&nbsp;    id2prio.put(&quot;PAS_DE_TRAIT_UNION&quot;, 50); //  // greater than agreement rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;SOCIOCULTUREL&quot;, 40); // greater than TIRET</b>
<b class="fc">&nbsp;    id2prio.put(&quot;A_VERBE_INFINITIF&quot;, 20); // greater than PRONSUJ_NONVERBE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;DE_OU_DES&quot;, 20); // greater than PAS_ADJ</b>
<b class="fc">&nbsp;    id2prio.put(&quot;EMPLOI_EMPLOIE&quot;, 20); // greater than MOTS_INCOMP</b>
<b class="fc">&nbsp;    id2prio.put(&quot;VOIR_VOIRE&quot;, 20); // greater than PLACE_DE_LA_VIRGULE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;D_VPPA&quot;, 20); //greater than D_J</b>
<b class="fc">&nbsp;    id2prio.put(&quot;EST_CE_QUE&quot;, 20); // greater than TRAIT_UNION_INVERSION</b>
<b class="fc">&nbsp;    id2prio.put(&quot;CONFUSION_PARLEZ_PARLER&quot;, 10); // greater than N_V</b>
<b class="fc">&nbsp;    id2prio.put(&quot;AGREEMENT_TOUT_LE&quot;, 10); // compare to TOUT_LES</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ESPACE_UNITES&quot;, 10); // needs to have higher priority than spell checker</b>
<b class="fc">&nbsp;    id2prio.put(&quot;BYTES&quot;, 10); // needs to be higher than spell checker for 10MB style matches</b>
<b class="fc">&nbsp;    id2prio.put(&quot;Y_A&quot;, 10); // needs to be higher than spell checker for style suggestion</b>
<b class="fc">&nbsp;    id2prio.put(&quot;COTE&quot;, 10); // needs to be higher than D_N</b>
<b class="fc">&nbsp;    id2prio.put(&quot;PEUTETRE&quot;, 10); // needs to be higher than AUX_ETRE_VCONJ</b>
<b class="fc">&nbsp;    id2prio.put(&quot;A_A_ACCENT&quot;, 10); // triggers false alarms for IL_FAUT_INF if there is no a/à correction</b>
<b class="fc">&nbsp;    id2prio.put(&quot;A_ACCENT_A&quot;, 10); // greater than PRONSUJ_NONVERBE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;A_A_ACCENT2&quot;, 10); // greater than ACCORD_SUJET_VERBE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;A_ACCENT&quot;, 10); // greater than ACCORD_SUJET_VERBE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;JE_M_APPEL&quot;, 10);  // override NON_V</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ACCORD_R_PERS_VERBE&quot;, 10);  // match before POSER_UNE_QUESTION</b>
<b class="fc">&nbsp;    id2prio.put(&quot;JE_SUI&quot;, 10);  // needs higher priority than spell checker</b>
&nbsp;    //id2prio.put(&quot;D_N&quot;, 10); // needs to have higher priority than agreement postponed adj | Commented out because many other rules should be higher: CAT_REGIONALISMES, CAT_TYPOGRAPHIE, CAT_GRAMMAIRE...
&nbsp;    //id2prio.put(&quot;ACCORD_COULEUR&quot;, 1); // needs to have higher priority than agreement postponed adj
<b class="fc">&nbsp;    id2prio.put(&quot;R_VAVOIR_VINF&quot;, 10); // needs higher priority than A_INFINITIF</b>
<b class="fc">&nbsp;    id2prio.put(&quot;AN_EN&quot;, 10); // needs higher priority than AN_ANNEE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;APOS_M&quot;, 10); // needs higher priority than APOS_ESPACE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ACCORD_PLURIEL_ORDINAUX&quot;, 10); // needs higher priority than D_J</b>
<b class="fc">&nbsp;    id2prio.put(&quot;SUJET_AUXILIAIRE&quot;, 10); // needs higher priority than JE_VERBE; TU_VERBE; IL_VERBE; ILS_VERBE; ON_VERBE;</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ADJ_ADJ_SENT_END&quot;, 10); // needs higher priority than ACCORD_COULEUR</b>
<b class="fc">&nbsp;    id2prio.put(&quot;OU_PAS&quot;, 10); // needs higher priority than VERBE_OBJ</b>
<b class="fc">&nbsp;    id2prio.put(&quot;PLACE_DE_LA_VIRGULE&quot;, 10); // needs higher priority than C_EST_QUOI</b>
<b class="fc">&nbsp;    id2prio.put(&quot;SE_CE&quot;, -10); // needs higher priority than ELISION</b>
<b class="fc">&nbsp;    id2prio.put(&quot;PAS_DE_SOUCIS&quot;, 10); // needs higher priority than PAS_DE_PB_SOUCIS (premium)</b>
&nbsp;    //id2prio.put(&quot;PRONSUJ_NONVERBE&quot;, 10); // needs higher priority than AUXILIAIRE_MANQUANT
&nbsp;    //id2prio.put(&quot;AUXILIAIRE_MANQUANT&quot;, 5); // needs higher priority than ACCORD_NOM_VERBE
<b class="fc">&nbsp;    id2prio.put(&quot;J_N&quot;, -10); // needs lesser priority than D_J</b>
<b class="fc">&nbsp;    id2prio.put(&quot;TE_NV&quot;, -20); // less than SE_CE, SE_SA and SE_SES</b>
<b class="fc">&nbsp;    id2prio.put(&quot;TE_NV2&quot;, -10); // less than SE_CE, SE_SA and SE_SES</b>
<b class="fc">&nbsp;    id2prio.put(&quot;INTERROGATIVE_DIRECTE&quot;, -10); // less than OU</b>
<b class="fc">&nbsp;    id2prio.put(&quot;V_J_A_R&quot;, -10); // less than grammar rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;TRES_TRES_ADJ&quot;, -10); // less than grammar rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;IMP_PRON&quot;, -10); // less than D_N</b>
<b class="fc">&nbsp;    id2prio.put(&quot;TOO_LONG_PARAGRAPH&quot;, -15);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;PREP_VERBECONJUGUE&quot;, -20);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;LA_LA2&quot;, -20); // less than LA_LA</b>
<b class="fc">&nbsp;    id2prio.put(&quot;FRENCH_WORD_REPEAT_RULE&quot;, -20); // less than TRES_TRES_ADJ</b>
<b class="fc">&nbsp;    id2prio.put(&quot;PAS_DE_VERBE_APRES_POSSESSIF_DEMONSTRATIF&quot;, -20);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;VIRGULE_VERBE&quot;, -20); // less than grammar rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;VERBES_FAMILIERS&quot;, -25);  // less than PREP_VERBECONJUGUE + PAS_DE_VERBE_APRES_POSSESSIF_DEMONSTRATIF</b>
<b class="fc">&nbsp;    id2prio.put(&quot;VERB_PRONOUN&quot;, -50); // greater than FR_SPELLING_RULE; less than ACCORD_V_QUESTION</b>
<b class="fc">&nbsp;    id2prio.put(&quot;IL_VERBE&quot;, -50); // greater than FR_SPELLING_RULE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;A_LE&quot;, -50); // less than A_ACCENT</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ILS_VERBE&quot;, -50); // greater than FR_SPELLING_RULE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;AGREEMENT_POSTPONED_ADJ&quot;, -50);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;MULTI_ADJ&quot;, -50);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;PARENTHESES&quot;, -50);// less than grammar rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;REP_ESSENTIEL&quot;, -50); // lesser than grammar rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;CONFUSION_AL_LA&quot;, -50); // lesser than AUX_AVOIR_VCONJ</b>
<b class="fc">&nbsp;    id2prio.put(&quot;LE_COVID&quot;, -60); // lower than COVID_19_GRAPHIE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;FR_SPELLING_RULE&quot;, -100);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;VIRG_INF&quot;, -100);// lesser than CONFUSION_E_ER</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ET_SENT_START&quot;, -151); // lower than grammalecte rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;MAIS_SENT_START&quot;, -151); // lower than grammalecte rules</b>
<b class="fc">&nbsp;    id2prio.put(&quot;EN_CE_QUI_CONCERNE&quot;, -152);  // less than MAIS_SENT_START + ET_SENT_START</b>
<b class="fc">&nbsp;    id2prio.put(&quot;EN_MEME_TEMPS&quot;, -152);  // less than MAIS_SENT_START + ET_SENT_START</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ET_AUSSI&quot;, -152);  // less than CONFUSION_EST_ET + ET_SENT_START</b>
<b class="fc">&nbsp;    id2prio.put(&quot;MAIS_AUSSI&quot;, -152);  // less than MAIS_SENT_START</b>
<b class="fc">&nbsp;    id2prio.put(&quot;ELISION&quot;, -200); // should be lower in priority than spell checker</b>
<b class="fc">&nbsp;    id2prio.put(&quot;POINT&quot;, -200); // should be lower in priority than spell checker</b>
<b class="fc">&nbsp;    id2prio.put(&quot;REPETITIONS_STYLE&quot;, -250);  // repetition style rules, usually with prefix REP_</b>
<b class="fc">&nbsp;    id2prio.put(&quot;POINTS_SUSPENSIONS_SPACE&quot;, -250);  // should be lower in priority than ADJ_ADJ_SENT_END</b>
<b class="fc">&nbsp;    id2prio.put(&quot;UPPERCASE_SENTENCE_START&quot;, -300);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;FRENCH_WHITESPACE_STRICT&quot;, -350); // picky; if on, it should overwrite FRENCH_WHITESPACE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;TOUT_MAJUSCULES&quot;, -400);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;VIRG_NON_TROUVEE&quot;, -400);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;POINTS_2&quot;, -400);</b>
<b class="fc">&nbsp;    id2prio.put(&quot;MOTS_INCOMP&quot;, -400); // greater than PRONSUJ_NONVERBE and DUPLICATE_DETERMINER</b>
<b class="fc">&nbsp;    id2prio.put(&quot;FRENCH_WHITESPACE&quot;, -400); // lesser than UPPERCASE_SENTENCE_START and FR_SPELLING_RULE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;MOT_TRAIT_MOT&quot;, -400); // lesser than UPPERCASE_SENTENCE_START and FR_SPELLING_RULE</b>
<b class="fc">&nbsp;    id2prio.put(&quot;FRENCH_WORD_REPEAT_BEGINNING_RULE&quot;, -350); // less than REPETITIONS_STYLE</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public Map&lt;String, Integer&gt; getPriorityMap() {
<b class="nc">&nbsp;    return id2prio;</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  protected int getPriorityForId(String id) {
<b class="nc">&nbsp;    Integer prio = id2prio.get(id);</b>
<b class="nc">&nbsp;    if (prio != null) {</b>
<b class="nc">&nbsp;      return prio;</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.startsWith(&quot;FR_COMPOUNDS&quot;)) {</b>
<b class="nc">&nbsp;      return 500;</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.equals(&quot;CAT_TYPOGRAPHIE&quot;)) {</b>
<b class="nc">&nbsp;      return 20; // greater than PRONSUJ_NONVERBE or agreement rules</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.equals(&quot;CAT_TOURS_CRITIQUES&quot;)) {</b>
<b class="nc">&nbsp;      return 20;</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.equals(&quot;CAT_HOMONYMES_PARONYMES&quot;)) {</b>
<b class="nc">&nbsp;      return 20;</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.equals(&quot;SON&quot;)) {</b>
<b class="nc">&nbsp;      return -5; // less than ETRE_VPPA_OU_ADJ</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.startsWith(&quot;CAR&quot;)) {</b>
<b class="nc">&nbsp;      return -50; // lesser than grammar rules</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.equals(&quot;CONFUSION_RULE_PREMIUM&quot;)) {</b>
<b class="nc">&nbsp;      return -50; // lesser than PRONSUJ_NONVERBE</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.startsWith(&quot;FR_MULTITOKEN_SPELLING_&quot;)) {</b>
<b class="nc">&nbsp;      return -90;</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.startsWith(&quot;FR_SIMPLE_REPLACE&quot;)) {</b>
<b class="nc">&nbsp;      return 150;</b>
&nbsp;    }
<b class="nc">&nbsp;    if (id.startsWith(&quot;grammalecte_&quot;)) {</b>
<b class="nc">&nbsp;      return -150;</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    if (id.startsWith(&quot;AI_FR_HYDRA_LEO&quot;)) { // prefer more specific rules (also speller)</b>
<b class="nc">&nbsp;      return -101;</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    if (id.startsWith(&quot;AI_FR_GGEC_REPLACEMENT_ORTHOGRAPHY&quot;)) { // prefer more specific rules (also speller)</b>
<b class="nc">&nbsp;      return -101;</b>
&nbsp;    }
<b class="nc">&nbsp;    return super.getPriorityForId(id);</b>
&nbsp;  }
&nbsp;  
&nbsp;  public boolean hasMinMatchesRules() {
<b class="nc">&nbsp;    return true;</b>
&nbsp;  }
&nbsp;
&nbsp;
&nbsp;  @Override
&nbsp;  public List&lt;RuleMatch&gt; filterRuleMatches(List&lt;RuleMatch&gt; ruleMatches, AnnotatedText text, Set&lt;String&gt; enabledRules) {
<b class="nc">&nbsp;    List&lt;RuleMatch&gt; resultMatches = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;    RuleMatch previousMatch = null;</b>
<b class="nc">&nbsp;    for (int i = 0; i &lt; ruleMatches.size(); i++) {</b>
<b class="nc">&nbsp;      RuleMatch currentMatch = adjustFrenchRuleMatch(ruleMatches.get(i), enabledRules);</b>
<b class="nc">&nbsp;      List&lt;String&gt; suggestions = currentMatch.getSuggestedReplacements();</b>
&nbsp;      // ignore adding punctuation at the sentence end
<b class="nc">&nbsp;      if (suggestions.size()==1 &amp;&amp; currentMatch.getRule().getId().startsWith(&quot;AI_FR_GGEC&quot;)) {</b>
<b class="nc">&nbsp;        String suggestion = suggestions.get(0);</b>
<b class="nc">&nbsp;        if (currentMatch.getRule().getId().equals(&quot;AI_FR_GGEC_MISSING_PUNCTUATION_PERIOD&quot;) &amp;&amp; suggestion.endsWith(&quot;.&quot;)) {</b>
<b class="nc">&nbsp;          if (currentMatch.getSentence().getText().replaceAll(&quot;\\s+$&quot;, &quot;&quot;).endsWith(suggestion.substring(0, suggestion.length() - 1))) {</b>
&nbsp;            continue;
&nbsp;          }
&nbsp;        }
&nbsp;      }
<b class="nc">&nbsp;      if (previousMatch != null &amp;&amp; previousMatch.getRule().getId().startsWith(&quot;AI_FR_GGEC&quot;) &amp;&amp;</b>
<b class="nc">&nbsp;              currentMatch.getRule().getId().startsWith(&quot;AI_FR_GGEC&quot;)) {</b>
<b class="nc">&nbsp;        if (previousMatch.getToPos() &gt; currentMatch.getFromPos()) {</b>
&nbsp;          continue;  // Skip overlapping matches
&nbsp;        }
&nbsp;        // Check if matches are adjacent and share the same &#39;picky&#39; status
<b class="nc">&nbsp;        if ((previousMatch.getToPos() == currentMatch.getFromPos() || previousMatch.getToPos() + 1 == currentMatch.getFromPos()) &amp;&amp;</b>
<b class="nc">&nbsp;                (previousMatch.getRule().getTags().contains(Tag.picky) == currentMatch.getRule().getTags().contains(Tag.picky))) {</b>
&nbsp;          // Merge if they have the same ITSIssueType
<b class="nc">&nbsp;          if (previousMatch.getRule().getLocQualityIssueType() == currentMatch.getRule().getLocQualityIssueType()) {</b>
<b class="nc">&nbsp;            RuleMatch mergedMatch = new RuleMatch(mergeMatches(previousMatch, currentMatch));</b>
<b class="nc">&nbsp;            previousMatch = mergedMatch;</b>
&nbsp;            continue;
&nbsp;          }
&nbsp;          // If matches have different ITSIssueTypes but neither is a style match, merge them
<b class="nc">&nbsp;          if (previousMatch.getRule().getLocQualityIssueType() != currentMatch.getRule().getLocQualityIssueType() &amp;&amp;</b>
<b class="nc">&nbsp;                  previousMatch.getRule().getLocQualityIssueType() != ITSIssueType.Style &amp;&amp; currentMatch.getRule().getLocQualityIssueType() != ITSIssueType.Style) {</b>
<b class="nc">&nbsp;            RuleMatch mergedMatch = new RuleMatch(mergeMatches(previousMatch, currentMatch));</b>
<b class="nc">&nbsp;            previousMatch = mergedMatch;</b>
&nbsp;            continue;
&nbsp;          }
&nbsp;        }
&nbsp;        // If no merge happened, add the previous match to results
<b class="nc">&nbsp;        resultMatches.add(previousMatch);</b>
<b class="nc">&nbsp;        previousMatch = currentMatch;  // Move to next match</b>
&nbsp;      } else {
&nbsp;        // Ensure current match becomes previous if no merging criteria are met
<b class="nc">&nbsp;        if (previousMatch != null) {</b>
<b class="nc">&nbsp;          resultMatches.add(previousMatch);</b>
&nbsp;        }
<b class="nc">&nbsp;        previousMatch = currentMatch;</b>
&nbsp;      }
&nbsp;    }
&nbsp;    // Add the last processed match if it exists and hasn&#39;t been added yet
<b class="nc">&nbsp;    if (previousMatch != null) {</b>
<b class="nc">&nbsp;      resultMatches.add(previousMatch);</b>
&nbsp;    }
<b class="nc">&nbsp;    return resultMatches;</b>
&nbsp;  }
&nbsp;
&nbsp;  private RuleMatch mergeMatches(RuleMatch match1, RuleMatch match2) {
&nbsp;    // Calculate separator based on position
<b class="nc">&nbsp;    String separator = &quot;&quot;;</b>
<b class="nc">&nbsp;    if (match1.getToPos() + 1 == match2.getFromPos()) {</b>
<b class="nc">&nbsp;      separator = &quot; &quot;;</b>
&nbsp;    }
&nbsp;    // Merge original error strings and suggested replacements
<b class="nc">&nbsp;    String newErrorStr = match1.getOriginalErrorStr() + separator + match2.getOriginalErrorStr();</b>
<b class="nc">&nbsp;    String newReplacement = match1.getSuggestedReplacements().get(0) + separator + match2.getSuggestedReplacements().get(0);</b>
&nbsp;
&nbsp;    // Create a new merged RuleMatch object
<b class="nc">&nbsp;    RuleMatch mergedMatch = new RuleMatch(match1.getRule(), match1.getSentence(), match1.getFromPos(), match2.getToPos(),</b>
&nbsp;            &quot;Il pourrait y avoir un problème ici.&quot;, &quot;Erreur potentielle&quot;);
<b class="nc">&nbsp;    mergedMatch.setOriginalErrorStr(newErrorStr);</b>
<b class="nc">&nbsp;    mergedMatch.setSuggestedReplacement(newReplacement);</b>
&nbsp;
&nbsp;    // Set ID based on issue type
<b class="nc">&nbsp;    String newId = &quot;AI_FR_MERGED_MATCH&quot;;</b>
<b class="nc">&nbsp;    if (match1.getRule().getLocQualityIssueType().equals(ITSIssueType.Style) &amp;&amp;</b>
<b class="nc">&nbsp;            match2.getRule().getLocQualityIssueType().equals(ITSIssueType.Style)) {</b>
<b class="nc">&nbsp;      newId += &quot;_STYLE&quot;;</b>
&nbsp;    }
<b class="nc">&nbsp;    if (match1.getRule().getTags().contains(Tag.picky) &amp;&amp;</b>
<b class="nc">&nbsp;            match2.getRule().getTags().contains(Tag.picky)) {</b>
<b class="nc">&nbsp;      newId += &quot;_PICKY&quot;;</b>
&nbsp;    }
<b class="nc">&nbsp;    mergedMatch.setSpecificRuleId(newId);</b>
&nbsp;
&nbsp;    // Set ITSIssueType to Grammar unless both are Style
<b class="nc">&nbsp;    if (!match1.getRule().getLocQualityIssueType().equals(match2.getRule().getLocQualityIssueType())) {</b>
<b class="nc">&nbsp;      mergedMatch.getRule().setLocQualityIssueType(ITSIssueType.Grammar);</b>
<b class="nc">&nbsp;    } else if (match1.getRule().getLocQualityIssueType() == ITSIssueType.Style) {</b>
<b class="nc">&nbsp;      mergedMatch.getRule().setLocQualityIssueType(ITSIssueType.Style);</b>
&nbsp;    }
<b class="nc">&nbsp;    return mergedMatch;</b>
&nbsp;  }
&nbsp;
<b class="fc">&nbsp;  private final List&lt;String&gt; spellerExceptions = Collections.singletonList(&quot;Ho Chi Minh&quot;);</b>
&nbsp;
&nbsp;  @Override
&nbsp;  public List&lt;String&gt; prepareLineForSpeller(String line) {
<b class="nc">&nbsp;    String[] parts = line.split(&quot;#&quot;);</b>
<b class="nc">&nbsp;    if (parts.length == 0) {</b>
<b class="nc">&nbsp;      return Collections.singletonList(line);</b>
&nbsp;    }
<b class="nc">&nbsp;    String[] formTag = parts[0].split(&quot;[\t;]&quot;);</b>
<b class="nc">&nbsp;    String form = formTag[0].trim();</b>
<b class="nc">&nbsp;    if (spellerExceptions.contains(form)) {</b>
<b class="nc">&nbsp;      return Collections.singletonList(&quot;&quot;);</b>
&nbsp;    }
<b class="nc">&nbsp;    if (formTag.length &gt; 1) {</b>
<b class="nc">&nbsp;      String tag = formTag[1].trim();</b>
<b class="nc">&nbsp;      if (tag.startsWith(&quot;Z&quot;) || tag.startsWith(&quot;N&quot;) || tag.equals(&quot;A&quot;) ) {</b>
<b class="nc">&nbsp;        return Collections.singletonList(form);</b>
&nbsp;      } else {
<b class="nc">&nbsp;        return Collections.singletonList(&quot;&quot;);</b>
&nbsp;      }
&nbsp;    }
<b class="nc">&nbsp;    return Collections.singletonList(line);</b>
&nbsp;  }
&nbsp;
&nbsp;  public MultitokenSpeller getMultitokenSpeller() {
<b class="nc">&nbsp;    return FrenchMultitokenSpeller.INSTANCE;</b>
&nbsp;  }
&nbsp;
&nbsp;  public RuleMatch adjustFrenchRuleMatch(RuleMatch rm, Set&lt;String&gt; enabledRules) {
<b class="nc">&nbsp;    rm.setOriginalErrorStr();</b>
<b class="nc">&nbsp;    String errorStr = rm.getOriginalErrorStr();</b>
<b class="nc">&nbsp;    List&lt;String&gt; suggestions = rm.getSuggestedReplacements();</b>
<b class="nc">&nbsp;    if (suggestions.size() == 1 &amp;&amp; rm.getRule().getId().startsWith(&quot;AI_FR_GGEC&quot;)) {</b>
<b class="nc">&nbsp;      String suggestion = suggestions.get(0);</b>
&nbsp;      // the suggestion only changes the casing
<b class="nc">&nbsp;      if (suggestion.equalsIgnoreCase(errorStr)) {</b>
<b class="nc">&nbsp;        rm.setMessage(&quot;Un usage différent des majuscules et des minuscules est recommandé.&quot;);</b>
<b class="nc">&nbsp;        rm.setShortMessage(&quot;Majuscules et minuscules&quot;);</b>
<b class="nc">&nbsp;        rm.getRule().setLocQualityIssueType(ITSIssueType.Typographical);</b>
<b class="nc">&nbsp;        rm.getRule().setCategory(Categories.CASING.getCategory(ResourceBundleTools.getMessageBundle(this)));</b>
<b class="nc">&nbsp;        rm.setSpecificRuleId(rm.getRule().getId().replace(&quot;ORTHOGRAPHY&quot;, &quot;CASING&quot;));</b>
&nbsp;        //ruleMatch.getRule().setTags(Arrays.asList(Tag.picky));
&nbsp;      }
&nbsp;    }
<b class="nc">&nbsp;    if (suggestions.size() == 1 &amp;&amp;  rm.getRule().getId().startsWith(&quot;AI_FR_GGEC&quot;)</b>
<b class="nc">&nbsp;      &amp;&amp; rm.getRule().getId().contains(&quot;MISSING_PRONOUN_LAPOSTROPHE&quot;)) {</b>
<b class="nc">&nbsp;      if (errorStr.equals(&quot;on&quot;) &amp;&amp; suggestions.get(0).equals(&quot;l&#39;on&quot;) &amp;&amp; rm.getSentence().getText().toLowerCase().contains(&quot;si on&quot;)) {</b>
<b class="nc">&nbsp;        rm.setSpecificRuleId(&quot;AI_FR_GGEC_SI_LON&quot;);</b>
<b class="nc">&nbsp;        rm.getRule().setTags(Collections.singletonList(Tag.picky));</b>
&nbsp;      }
&nbsp;    }
<b class="nc">&nbsp;    if (rm.getRule().getId().startsWith(&quot;AI_FR_GGEC&quot;) &amp;&amp; rm.getRule().getId().contains(&quot;REPLACEMENT_PUNCTUATION_QUOTE&quot;</b>
&nbsp;    )) {
<b class="nc">&nbsp;      rm.setSpecificRuleId(&quot;AI_FR_GGEC_QUOTES&quot;);</b>
<b class="nc">&nbsp;      rm.getRule().setTags(Collections.singletonList(Tag.picky));</b>
<b class="nc">&nbsp;      rm.getRule().setLocQualityIssueType(ITSIssueType.Typographical);</b>
&nbsp;    }
&nbsp;    // if the typographical apostrophe rule is enabled, use the typographical apostrophe in suggestons
<b class="nc">&nbsp;    if (enabledRules != null &amp;&amp; enabledRules.contains(&quot;APOS_TYP&quot;)) {</b>
<b class="nc">&nbsp;      List&lt;String&gt; newReplacements = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;      for (String s : rm.getSuggestedReplacements()) {</b>
<b class="nc">&nbsp;        if (s.length() &gt; 1) {</b>
<b class="nc">&nbsp;          s = s.replace(&#39;\&#39;&#39;, &#39;’&#39;);</b>
&nbsp;        }
<b class="nc">&nbsp;        newReplacements.add(s);</b>
&nbsp;      }
<b class="nc">&nbsp;      rm.setSuggestedReplacements(newReplacements);</b>
&nbsp;    }
<b class="nc">&nbsp;    return rm;</b>
&nbsp;  }
&nbsp;
&nbsp;  public static @NotNull French getInstance() {
<b class="nc">&nbsp;    Language language = Objects.requireNonNull(Languages.getLanguageForShortCode(FRENCH_SHORT_CODE));</b>
<b class="nc">&nbsp;    if (language instanceof French french) { // cannot use French here as in premium FRENCH_SHORT_CODE returns FrenchPremium</b>
<b class="nc">&nbsp;      return french;</b>
&nbsp;    }
<b class="nc">&nbsp;    throw new RuntimeException(&quot;French(Premium) language expected, got &quot; + language);</b>
&nbsp;  }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-02-17 23:51</div>
</div>
</body>
</html>
